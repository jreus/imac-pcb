Version 4
SHEET 1 1228 1008
WIRE 224 96 224 64
WIRE -752 144 -928 144
WIRE -1488 160 -1488 128
WIRE -16 176 -16 112
WIRE -752 208 -752 144
WIRE 224 208 224 176
WIRE -272 224 -400 224
WIRE -1696 240 -1696 176
WIRE -336 256 -336 176
WIRE 160 256 144 256
WIRE -1488 272 -1488 240
WIRE -400 272 -400 224
WIRE -368 272 -400 272
WIRE -272 288 -272 224
WIRE -272 288 -304 288
WIRE -208 288 -272 288
WIRE -16 288 -16 256
WIRE -16 288 -144 288
WIRE 64 288 -16 288
WIRE 144 288 144 256
WIRE 176 288 144 288
WIRE -752 304 -752 288
WIRE -560 304 -752 304
WIRE -432 304 -496 304
WIRE -368 304 -432 304
WIRE -1536 320 -1552 320
WIRE -752 320 -752 304
WIRE -432 336 -432 304
WIRE -16 336 -16 288
WIRE -1696 352 -1696 320
WIRE -1696 352 -1904 352
WIRE -1648 352 -1696 352
WIRE -1536 352 -1536 320
WIRE -1536 352 -1568 352
WIRE -1696 400 -1696 352
WIRE 224 416 224 304
WIRE -16 448 -16 416
WIRE -1488 480 -1488 368
WIRE -752 480 -752 400
WIRE -432 480 -432 416
WIRE -336 480 -336 320
WIRE 288 496 288 448
WIRE 400 496 400 448
WIRE -1904 512 -1904 352
WIRE -1696 512 -1696 480
WIRE -1024 512 -1024 480
WIRE -16 560 -16 528
WIRE 288 608 288 576
WIRE 400 608 400 576
WIRE 400 608 288 608
WIRE 480 608 400 608
WIRE -1696 624 -1696 592
WIRE -1904 640 -1904 592
WIRE -1168 640 -1168 608
WIRE -1024 640 -1024 592
WIRE 240 672 192 672
WIRE 352 672 320 672
WIRE -1168 768 -1168 720
FLAG -16 560 0
FLAG -928 144 FROM_EXT
FLAG -16 112 V+
FLAG 400 448 Vref
FLAG 288 448 V+
FLAG -1024 640 Vref
FLAG 192 672 0
FLAG 352 672 SIG_TO_MOD
FLAG -1024 480 FROM_EXT
FLAG -336 480 0
FLAG -336 176 V+
FLAG 224 416 0
FLAG 224 64 SIG_TO_MOD
FLAG -432 480 Vref
FLAG -752 480 0
FLAG 480 608 0
FLAG -1168 768 0
FLAG -1168 608 FROM_DUINO
FLAG -1472 816 0
FLAG -1664 816 0
FLAG -1728 768 0
FLAG -1664 720 0
FLAG -1520 800 0
FLAG -1472 720 0
FLAG -1696 624 0
FLAG -1696 176 V+
FLAG -1488 480 0
FLAG -1488 128 SIG_TO_MOD
FLAG -1904 640 Vref
FLAG -1792 848 0
FLAG -1840 928 0
FLAG -1792 944 0
FLAG -16 288 Vbias
FLAG -432 304 Vatten
SYMBOL res 160 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL res 0 272 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 50k
SYMBOL res -32 320 R0
SYMATTR InstName R3
SYMATTR Value {100k*bias}
SYMBOL res -32 432 R0
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL cap -144 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res -768 192 R0
SYMATTR InstName R6
SYMATTR Value {100k*att}
SYMBOL res -768 304 R0
SYMATTR InstName R7
SYMATTR Value {100k*(1-att)}
SYMBOL cap -496 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL voltage 288 480 R0
SYMATTR InstName V1
SYMATTR Value 5V
SYMBOL voltage -1024 496 R0
WINDOW 39 24 118 Left 2
WINDOW 123 24 140 Left 2
SYMATTR SpiceLine Rser=600
SYMATTR Value2 AC 1.2
SYMATTR InstName V2
SYMATTR Value SINE(0 1.2 2000)
SYMBOL voltage 336 672 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 39 54 56 VTop 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 3.3 0 15n 15n 0.00001 0.00002)
SYMATTR SpiceLine Rser=50
SYMBOL Opamps/LT1677 -336 224 R0
SYMATTR InstName U1
SYMBOL nmos -1520 720 R0
SYMATTR InstName M2
SYMATTR Value STD30NF06L
SYMBOL res -448 320 R0
SYMATTR InstName R5
SYMATTR Value 1meg
SYMBOL res 208 80 R0
SYMATTR InstName R10
SYMATTR Value 100
SYMBOL voltage 400 480 R0
SYMATTR InstName V4
SYMATTR Value 2.5V
SYMBOL voltage -1168 624 R0
WINDOW 39 24 118 Left 2
SYMATTR SpiceLine Rser=10
SYMATTR InstName V5
SYMATTR Value PULSE(0 5.0 0 30n 30n 0.001 0.002)
SYMATTR Value2 AC 5 0
SYMBOL npn -1552 272 R0
SYMATTR InstName Q1
SYMATTR Value BC817-25
SYMBOL res -1552 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 50k
SYMBOL res -1680 336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 50k
SYMBOL res -1712 384 R0
SYMATTR InstName R11
SYMATTR Value {100k*bias}
SYMBOL res -1712 496 R0
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL res -1504 144 R0
SYMATTR InstName R13
SYMATTR Value 100
SYMBOL nmos 176 208 R0
SYMATTR InstName M3
SYMATTR Value PSMN1R430YLD
SYMBOL voltage -1904 496 R0
WINDOW 39 24 118 Left 2
WINDOW 123 24 140 Left 2
SYMATTR SpiceLine Rser=600
SYMATTR Value2 AC 0.5
SYMATTR InstName V6
SYMATTR Value SINE(0 2.0 2000)
SYMBOL npn -1728 720 R0
SYMATTR InstName Q2
SYMATTR Value BC817-25
TEXT -1288 -16 Left 2 !.INCLUDE models/std30nf06.txt\n.PARAM att=0.001\n.PARAM bias=0.2\n.TRAN 0.1 0.001\n#.AC DEC 100 5 300\n#V3=3.3V\n#.DC V6 -2.5 2.5 0.01
TEXT -888 184 Left 2 ;Attenuation\nPot
TEXT 304 128 Left 2 ;Optional Resistor\nin case current draw of \ndirect grounding is too high\nand causes spikes
TEXT -888 24 Left 2 ;INPUT STAGE CIRCUIT\nFOR MODULATION SIGNALS\nALL MODULATION SIGNALS ARE ASSUMED TO BE POSITIVE
TEXT -1928 0 Left 2 ;TRANSISTOR RESPONSE TEST
RECTANGLE Normal -900 172 -592 416 3
