Version 4
SHEET 1 1228 1008
WIRE 128 96 128 64
WIRE -752 144 -928 144
WIRE -80 176 -80 112
WIRE -752 208 -752 144
WIRE 128 208 128 176
WIRE -272 224 -400 224
WIRE -336 256 -336 176
WIRE -400 272 -400 224
WIRE -368 272 -400 272
WIRE -272 288 -272 224
WIRE -272 288 -304 288
WIRE -208 288 -272 288
WIRE -80 288 -80 256
WIRE -80 288 -144 288
WIRE -32 288 -80 288
WIRE 80 288 48 288
WIRE -752 304 -752 288
WIRE -560 304 -752 304
WIRE -432 304 -496 304
WIRE -368 304 -432 304
WIRE -752 320 -752 304
WIRE -432 336 -432 304
WIRE -80 336 -80 288
WIRE 128 416 128 304
WIRE -80 448 -80 416
WIRE -752 480 -752 400
WIRE -432 480 -432 416
WIRE -336 480 -336 320
WIRE 288 496 288 448
WIRE 400 496 400 448
WIRE -1024 512 -1024 480
WIRE -80 560 -80 528
WIRE 288 608 288 576
WIRE 400 608 400 576
WIRE 400 608 288 608
WIRE 480 608 400 608
WIRE -1168 640 -1168 608
WIRE -1024 640 -1024 592
WIRE 240 672 192 672
WIRE 352 672 320 672
WIRE -1168 768 -1168 720
FLAG -80 560 0
FLAG -928 144 FROM_EXT
FLAG -80 112 V+
FLAG 400 448 Vref
FLAG 288 448 V+
FLAG -1024 640 0
FLAG 192 672 0
FLAG 352 672 SIG_TO_MOD
FLAG -1024 480 FROM_EXT
FLAG -336 480 0
FLAG -336 176 V+
FLAG 128 416 0
FLAG 128 64 SIG_TO_MOD
FLAG -432 480 Vref
FLAG -752 480 0
FLAG 480 608 0
FLAG -1168 768 0
FLAG -1168 608 FROM_DUINO
SYMBOL res 64 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL res -64 272 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 50k
SYMBOL res -96 320 R0
SYMATTR InstName R3
SYMATTR Value {100k*bias}
SYMBOL res -96 432 R0
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL cap -144 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res -768 192 R0
SYMATTR InstName R6
SYMATTR Value {100k*att}
SYMBOL res -768 304 R0
SYMATTR InstName R7
SYMATTR Value {100k*(1-att)}
SYMBOL cap -496 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL voltage 288 480 R0
SYMATTR InstName V1
SYMATTR Value 5V
SYMBOL voltage -1024 496 R0
WINDOW 39 24 118 Left 2
WINDOW 123 24 140 Left 2
SYMATTR SpiceLine Rser=600
SYMATTR InstName V2
SYMATTR Value SINE(2.5 1.2 2000)
SYMATTR Value2 AC 1.2
SYMBOL voltage 336 672 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 3.3V 0 10n 10n 0.012m 0.024m)
SYMATTR SpiceLine Rser=50
SYMBOL Opamps/LT1677 -336 224 R0
SYMATTR InstName U1
SYMBOL nmos 80 208 R0
SYMATTR InstName M2
SYMATTR Value STD30NF06L
SYMBOL res -448 320 R0
SYMATTR InstName R5
SYMATTR Value 1meg
SYMBOL res 112 80 R0
SYMATTR InstName R10
SYMATTR Value 100
SYMBOL voltage 400 480 R0
SYMATTR InstName V4
SYMATTR Value 2.5V
SYMBOL voltage -1168 624 R0
WINDOW 39 24 118 Left 2
SYMATTR SpiceLine Rser=10
SYMATTR InstName V5
SYMATTR Value PULSE(0 5.0 0 30n 30n 0.001 0.002)
SYMATTR Value2 AC 5 0
TEXT -1288 -16 Left 2 !.INCLUDE models/std30nf06.txt\n.PARAM att=0.4\n.PARAM bias=0.3\n#.TRAN 0.1 0.104 0.10\n.AC DEC 100 5 300
TEXT -888 184 Left 2 ;Attenuation\nPot
TEXT 216 136 Left 2 ;Optional Resistor\nin case current draw of \ndirect grounding is too high\nand causes spikes
TEXT -888 24 Left 2 ;INPUT STAGE CIRCUIT\nFOR MODULATION SIGNALS\nALL MODULATION SIGNALS ARE ASSUMED TO BE POSITIVE
RECTANGLE Normal -900 172 -592 416 3
